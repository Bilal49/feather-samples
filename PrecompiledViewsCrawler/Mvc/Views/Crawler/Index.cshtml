@{
    ViewBag.Title = "Precompilation crawler";
}

<link rel="stylesheet" href="~/Content/bootstrap.min.css" type="text/css" />
<script src="~/Scripts/jquery.min.js"></script>
<script type="text/javascript">
    $(document).ready(function () {
        $crawlbutton = $("#crawl-button");
        $crawlbutton.on("click", function () {
            var $this = $(this);

            var loadingLabel = $("#loadingLabel");
            var url = "/Precompilation/Crawler/Crawl";

            $this.prop("disabled", true);
            loadingLabel.show();

            $.ajax({
                url: url,
                contentType: "application/html; charset=utf-8",
                headers: {
                    "Cache-Control": "no cache"
                },
                success: function (data) {
                    var content = $("#results").html();
                    $("#results").html(content + data);
                    $this.prop("disabled", false);
                    loadingLabel.hide();
                },
                cache: false
            });
        });
    });
</script>

<button id="crawl-button" class="btn btn-default">Start</button>
<label id="loadingLabel" style="display: none">Loading...</label>

<div id="results"></div>
